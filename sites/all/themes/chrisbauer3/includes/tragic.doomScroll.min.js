/* 	Begin: TragicMedia.com - Tragic Doom Scroll
/* 	Version: 1.6.6
/* 	Updated: 10/13 by Rich Rudzinski
/*------------------------------------------*/
/* 	Notes: Place in the page footer! Must fire pre-doc.ready
	container: (str) unique selector of the slide item wrapper element
	btns: (bool) if true the script will create the left/right buttons for you
	btnLeft: (str) unique selector of the left button
	btnRight: (str) unique selector of the right button 
	itemClass: (str) class that is unique to all slide elements
	pageDots: (bool | str) if true the script will create the page dots, or enter a unique selector of the page dot items
	interval: (bool) if true script will auto-scroll
	intervalSpeed: (num) interval duration
	slideNumber: (num) number of items to slide
	numberShown: (num) number of slide items shown
	speed: (num) slide speed, works by duration. the larger the number, the slower the slide
	hoverPause: (bool) if true the slide interval will pause when the user's mouse is over the slider frame
	responsive: (bool) if true the slider will resize on browser resize/to fit the device width
	responsiveEl: (str) unique selector of the element in each slide item that you want to turn responsive
	swipe: (bool) if true, the script will respond to swiping on mobile devices
	initFunc: (func) function that fires during the initialization process
	slideInit: (func) function that fires pre-slide
	slideEnd: (func) function that fires post-slide
*/
// 	var constants = {container:'', btns:bool, btnLeft:'', btnRight:'', itemClass:'', pageDots:bool|'#container', interval:bool, intervalSpeed:#, slideNumber:#, numberShown:#, speed:#, hoverPause:bool, responsive:bool, responsiveEl:'', swipe:bool, initFunc:function(){}, slideInit:function(){}, slideEnd:function(){}};
// 	var scroll = new dScroll(constants);

function dScroll(e){var t=this,n=window.onload;this.container=$(e.container);this.containerId=e.container;this.container.wrap('<div class="doom-wrap" />').wrap('<div class="doom-frame" />');this.frame=this.container[0].parentNode;this.wrap=this.frame.parentNode;this.wrap.style.position="relative";this.hideScroll();this.firstLoad=true;this.itemClass=e.itemClass;this.slideItems=$(e.container+" "+e.itemClass);this.btns=e.btns==undefined?false:e.btns;this.btnLeft=!e.btnLeft||e.btnLeft==""||e.btnLeft==undefined?false:$(e.btnLeft);this.btnRight=!e.btnLeft||e.btnRight==""||e.btnRight==undefined?false:$(e.btnRight);this.slideNumber=e.slideNumber==undefined?this.slideNumber=1:this.slideNumber=e.slideNumber;this.startPosition=e.startPosition==undefined?this.startPosition=1:this.startPosition=e.startPosition;this.currSlide=this.slideNumber;this.hoverPause=e.hoverPause==undefined?true:e.hoverPause;this.responsive=e.responsive==undefined?false:e.responsive;this.responsiveEl=e.responsiveEl==undefined?false:$(e.container+" "+e.responsiveEl);this.swipe=e.swipe==undefined?false:e.swipe;this.dir="right";this.numberShown=e.numberShown==undefined?this.numberShown=this.slideNumber:this.numberShown=e.numberShown;this.speed=e.speed==undefined?this.speed=600:this.speed=e.speed;this.speedBak=this.speed;this.pageDots=e.pageDots==undefined?false:e.pageDots;this.interval=e.interval==undefined?false:e.interval;this.intervalSpeed=e.intervalSpeed==undefined?5e3:e.intervalSpeed;this.initFunc=e.initFunc==undefined?false:e.initFunc;this.slideInit=e.slideInit==undefined?false:e.slideInit;this.slideEnd=e.slideEnd==undefined?false:e.slideEnd;if(this.slideItems.length%this.numberShown!=0)this.addNodes(this.slideNumber-this.slideItems.length%this.numberShown);window.onload=function(){if(typeof n==="function")n();t.init()}}dScroll.prototype.init=function(){var e,t,n,r,i,s=window.onresize,o=this,u=window.innerWidth?window.innerWidth:document.body.offsetWidth,a=window.innerHeight?window.innerHeight:document.body.offsetHeight;if(this.responsive){t=function(){n=window.innerWidth?window.innerWidth:document.body.offsetWidth;r=window.innerHeight?window.innerHeight:document.body.offsetHeight;if(!o.animate&&(n!=u||r!=a)){if(o.scrollInterval)clearInterval(o.scrollInterval);u=window.innerWidth?window.innerWidth:document.body.offsetWidth,a=window.innerHeight?window.innerHeight:document.body.offsetHeight,o.hideScroll();o.resetSlide();o.initScroll()}else if(o.animate){if(i)clearTimeout(i);i=setTimeout(t,150)}};window.onresize=function(){if(typeof s==="function")s();if(i)clearTimeout(i);i=setTimeout(t,150)}}if(this.slideItems.find("img").length){e=this.slideItems.find("img")[0];if(e.complete||e.readyState===4){o.initScroll()}else{$(e).load(function(){o.initScroll()})}e.src=this.slideItems.find("img")[0].src}else{this.initScroll()}};dScroll.prototype.hideScroll=function(){this.wrap.style.opacity=0};dScroll.prototype.showScroll=function(){$(this.wrap).animate({opacity:1},1500)};dScroll.prototype.addNodes=function(e){var t;for(i=0;i<e;i++){t=this.slideItems[this.slideItems.length-1].cloneNode(false);this.container.append(t)}this.slideItems=$(this.containerId+" "+this.itemClass)};dScroll.prototype.initScroll=function(){var e,t,n=0,r=0,i=this.slideItems.length,s=0;if(this.responsive){this.frame.style.cssText="width:100%; height:auto; overflow:hidden; position:relative; opacity:"+this.frame.style.opacity;this.container[0].style.cssText="width:100%; height:auto; overflow:hidden;";for(e=0;e<i;e++){this.slideItems[e].style.cssText="width:100%; height:auto; overflow:hidden;";if(this.responsiveEl.length&&this.responsiveEl[e])this.responsiveEl[e].style.cssText="width:100%; height:auto;"}}for(e=0;e<i;e++){if(this.slideItems[e].offsetHeight>s)s=this.slideItems[e].offsetHeight;this.slideItems[e].setAttribute("data-num",e)}this.itemHeight=s;if(this.responsive){this.container[0].style.display="none";this.frame.style.height=this.itemHeight+"px";this.frame.style.overflow="hidden";this.frameWidth=this.frame.offsetWidth;this.itemWidth=this.frameWidth/this.numberShown;this.container[0].style.display="block"}else{if(window.getComputedStyle){t=window.getComputedStyle(this.slideItems[0]);if(t){n=parseInt(t.getPropertyValue("margin-left"));r=parseInt(t.getPropertyValue("margin-right"))}}else{t=this.slideItems[0].currentStyle;if(t){n=parseInt(t.marginLeft);r=parseInt(t.marginRight)}}this.itemWidth=this.slideItems[0].offsetWidth;this.frameWidth=this.itemWidth*this.numberShown-n-r}this.totalWidth=this.itemWidth*this.slideItems.length+(n+r)*this.slideItems.length;this.totalSlide=this.slideNumber*this.itemWidth;this.createScroll()};dScroll.prototype.createScroll=function(){var e=this.slideItems.length,t=this.itemHeight,n,r;for(r=0;r<e;r++){this.slideItems[r].style.cssText="width:"+this.itemWidth+"px; height:auto; float:left;";if(this.slideItems[r].offsetHeight>t)t=this.slideItems[r].offsetHeight}if(t!=this.itemHeight){this.itemHeight=t;for(r=0;r<e;r++){this.slideItems[r].style.height=this.itemHeight+"px"}}this.wrap.style.cssText="position:relative; height:auto; overflow:hidden";this.frame.style.cssText="width:"+this.frameWidth+"px; height:"+this.itemHeight+"px; overflow:"+"hidden; position:relative; opacity:"+this.frame.style.opacity;this.container[0].style.cssText="width:"+this.totalWidth+"px; height:"+this.itemHeight+"px; position:absolute; left:"+this.container.left+"px";this.animate=false;if(this.firstLoad){this.disabled=false;if(this.btns)this.createBtns();this.addBtnEvent();if(this.pageDots&&this.slideItems.length>this.numberShown)this.makePageDots();if(this.initFunc)this.initFunc();this.adjustStartPosition();this.firstLoad=false}this.showScroll();if(this.interval&&!this.disabled)this.createInterval()};dScroll.prototype.adjustStartPosition=function(){var e;if(this.startPosition!=1){e=this.startPosition-1;if(e>=this.slideItems.length)e=e%this.slideItems.length;if(e>0)this.shiftElementsRight(e)}this.container.left=0;this.container.css("left",0);$(this.slideItems[0]).addClass("active-slide")};dScroll.prototype.createBtns=function(){var e=document.createElement("a"),t=document.createElement("a");e.innerHTML="previous";t.innerHTML="next";e.className="btn-left";t.className="btn-right";e.href="#";t.href="#";this.wrap.insertBefore(e,this.frame);$(this.wrap)[0].appendChild(t);this.btnLeft=$(e);this.btnRight=$(t)};dScroll.prototype.addBtnEvent=function(){var e,t,n,r,i=this,s=function(){if(!i.animate&&!i.disabled){if(i.scrollInterval)clearInterval(i.scrollInterval);i.animate=true;i.dir="left";i.shiftElementsLeft(i.slideNumber);i.slideLeft()}},o=function(){if(!i.animate&&!i.disabled){if(i.scrollInterval)clearInterval(i.scrollInterval);i.animate=true;i.dir="right";i.slideRight()}},t=function(e){if(e.type=="touchmove")e.preventDefault();if(e.type=="touchstart")n=e.changedTouches[0];if(e.type=="touchend"){r=e.changedTouches[0];if(Math.abs(n.pageX-r.pageX)>Math.abs(n.pageY-r.pageY)){i.speed=200;if(n.pageX>r.pageX){o();return false}else if(n.pageX<r.pageX){s();return false}}else{if(n.pageY>r.pageY){$("body").animate({scrollTop:document.body.scrollTop+300},150)}else{$("body").animate({scrollTop:document.body.scrollTop-300},150)}}}};if(this.slideItems.length<=this.numberShown||this.slideItems.length<=this.slideNumber*2){this.disabled=true;if(this.scrollInterval)clearInterval(this.scrollInterval);if(this.btnLeft){this.btnLeft.addClass("disabled-btn");this.btnLeft.click(function(){return false})}if(this.btnRight){this.btnRight.addClass("disabled-btn");this.btnRight.click(function(){return false})}}else{if(this.btnLeft)this.btnLeft.click(function(){s();return false});if(this.btnRight)this.btnRight.click(function(){o();return false});if(this.swipe){if(!this.container[0].addEventListener){this.container[0].attachEvent("touchstart",t);this.container[0].attachEvent("touchmove",t);this.container[0].attachEvent("touchend",t)}else{this.container[0].addEventListener("touchstart",t,false);this.container[0].addEventListener("touchmove",t,false);this.container[0].addEventListener("touchend",t,false)}}}if(this.interval&&this.hoverPause&&!this.disabled){this.frame.onmouseover=function(){if(i.scrollInterval)clearInterval(i.scrollInterval)};this.frame.onmouseout=function(){i.createInterval()}}};dScroll.prototype.createInterval=function(){var e=this;if(this.scrollInterval)clearInterval(this.scrollInterval);this.scrollInterval=setInterval(function(){e.animate=true;e.dir="right";e.slideRight()},this.intervalSpeed)};dScroll.prototype.shiftElementsLeft=function(e){if(this.slideInit)this.slideInit();this.slideItems.removeClass("active-slide");this.container.left=this.container.left-e*this.itemWidth;this.container.css("left",this.container.left+"px");for(i=e;i>0;i--){$(this.slideItems[this.slideItems.length-1]).insertBefore(this.slideItems[0]);this.slideItems=$(this.containerId+" "+this.itemClass)}};dScroll.prototype.shiftElementsRight=function(e){this.container.left=this.container.left+e*this.itemWidth;this.container.css("left",this.container.left+"px");for(i=e;i>0;i--){$(this.slideItems[0]).insertAfter(this.slideItems[this.slideItems.length-1]);this.slideItems=$(this.containerId+" "+this.itemClass)}if(this.slideEnd)this.slideEnd();this.resetSlide();this.animate=false};dScroll.prototype.slideLeft=function(){var e=this;if(this.pageDots)this.changePageDot();this.container.left=this.container.left+this.totalSlide;this.container.animate({left:this.container.left},this.speed,function(){if(e.slideEnd){e.slideEnd()}e.resetSlide();e.animate=false})};dScroll.prototype.slideRight=function(){var e=this;if(this.slideInit)this.slideInit();this.slideItems.removeClass("active-slide");if(this.pageDots)this.changePageDot();this.container.left=this.container.left-this.totalSlide;this.container.animate({left:this.container.left},this.speed,function(){e.shiftElementsRight(e.currSlide)})};dScroll.prototype.makePageDots=function(){var e,t,n,r,i="";if(typeof this.pageDots=="boolean"){r=document.createElement("div");r.className="page-dots";r=r.appendChild(document.createElement("ul"));for(e=0,t=this.slideItems.length/this.slideNumber;e<t;e++){if(e==t)i=" slide-dot-last";r.innerHTML=r.innerHTML+'<li class="slide-dot slide-dot-'+e+i+'" data-num="'+e+'"><a href="#" title="'+e+1+'"">'+(e+1)+"</a></li>"}this.wrap.insertBefore(r.parentNode,this.container[0].nextSibling);this.dotContainer=$(this.wrap).find(".page-dots");this.dotLinks=this.dotContainer.find(".slide-dot");this.dotLinks.css("float","left");n={position:"absolute","z-index":50};this.dotContainer.css(n)}else{this.dotLinks=$(this.pageDots);this.dotContainer=$(this.dotLinks[0].parentNode);for(e=0,t=this.dotLinks.length;e<t;e++){if(e==t)i=" slide-dot-last";$(this.dotLinks[e]).addClass("slide-dot slide-dot-"+e+i);this.dotLinks[e].setAttribute("data-num",e)}}$(this.dotLinks[0]).addClass("active");this.curr=parseInt(this.dotLinks[0].getAttribute("data-num"));this.addDotClick()};dScroll.prototype.addDotClick=function(){var e=this,t=this.slideItems.length/this.slideNumber,n=this.dotLinks.length,r;for(i=0;i<n;i++){this.dotLinks[i].onclick=function(){if(e.scrollInterval)clearInterval(e.scrollInterval);r=parseInt(this.getAttribute("data-num"));if(!e.animate&&r!=e.curr){if(r>e.curr){if(r-e.curr<=t-r+e.curr){e.dir="right";e.currSlide=r-e.curr}else{e.dir="left";e.currSlide=t-r+e.curr}}else{if(e.curr-r<t-e.curr+r){e.dir="left";e.currSlide=e.curr-r}else{e.dir="right";e.currSlide=t-e.curr+r}}e.currSlide=e.currSlide*e.slideNumber;e.totalSlide=e.currSlide*e.itemWidth;if(e.dir=="right"){e.animate=true;e.slideRight()}else{e.animate=true;e.shiftElementsLeft(e.currSlide);e.slideLeft()}}return false}}};dScroll.prototype.changePageDot=function(){var e=this.slideItems.length/this.slideNumber;if(this.dir=="right"){this.curr=this.curr+this.currSlide/this.slideNumber}else{this.curr=this.curr-this.currSlide/this.slideNumber}if(this.curr>=e){this.curr=this.curr%e}else if(this.curr<0){this.curr=e+this.curr}this.dotContainer.find(".active").removeClass("active");$(this.dotLinks[this.curr]).addClass("active")};dScroll.prototype.resetSlide=function(){if(this.swipe)this.speed=this.speedBak;this.totalSlide=this.slideNumber*this.itemWidth;this.currSlide=this.slideNumber;$(this.slideItems[this.currSlide-1]).addClass("active-slide")}